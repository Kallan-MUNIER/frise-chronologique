<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Frise Chronologique Modifiable</title>
  <script src="https://unpkg.com/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js"></script>
  <link href="https://unpkg.com/vis-timeline/styles/vis-timeline-graph2d.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
    }
    #timeline {
      height: 400px;
      border: 1px solid #ccc;
    }
    #editor {
      margin-top: 20px;
    }
    textarea {
      width: 100%;
      height: 150px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>Frise Chronologique Modifiable</h1>
  <div id="timeline"></div>

  <div id="editor">
    <h2>Modifier les événements</h2>
    <p>Ajoute ou modifie des événements ci-dessous au format JSON :</p>
    <textarea id="jsonInput">[
  { "id": 1, "content": "Nouvel An 2025", "start": "2025-01-01" },
  { "id": 2, "content": "Création du projet", "start": "2025-08-05" },
  { "id": 3, "content": "Lancement Version 2", "start": "2026-01-15" }
]</textarea>
    <br><br>
    <button onclick="updateTimeline()">Mettre à jour la frise</button>
  </div>

  <script>
    const container = document.getElementById('timeline');
    let timeline;

    function createTimeline(events) {
      const items = new vis.DataSet(events);
      const options = {
        editable: true,
        margin: { item: 20 }
      };
      timeline = new vis.Timeline(container, items, options);
    }

    function updateTimeline() {
      const input = document.getElementById('jsonInput').value;
      try {
        const events = JSON.parse(input);
        createTimeline(events);
      } catch (error) {
        alert("❌ Erreur de format JSON : " + error.message);
      }
    }

    // Initialisation avec les données par défaut
    updateTimeline();
  </script>
</body>
</html>
